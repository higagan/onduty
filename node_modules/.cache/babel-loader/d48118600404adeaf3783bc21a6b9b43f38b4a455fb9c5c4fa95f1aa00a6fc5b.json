{"ast":null,"code":"// src/components/Profile/StaffProfile.js\nimport React,{useContext,useState}from'react';import{Typography,Box,List,ListItem,ListItemText,Divider,Paper,TextField,Button}from'@mui/material';import{AuthContext}from'../../contexts/AuthContext';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";function StaffProfile(){const{user,bookings,tasks,updateUserProfile}=useContext(AuthContext);const userBookings=bookings.filter(b=>b.userId===user.username);const[editMode,setEditMode]=useState(false);const[profileData,setProfileData]=useState({email:user.email||'',phone:user.phone||''// Add other profile fields as needed\n});const handleChange=e=>{setProfileData({...profileData,[e.target.name]:e.target.value});};const handleSave=()=>{// Use updateUserProfile instead of setUser directly\nupdateUserProfile(profileData);setEditMode(false);};return/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:800,mx:'auto',mt:5},children:[/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:4},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",gutterBottom:true,children:[user.username,\"'s Profile\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Type: Medical Staff\"}),!editMode?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Email: \",user.email||'Not provided']}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Phone: \",user.phone||'Not provided']}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",sx:{mt:2},onClick:()=>setEditMode(true),children:\"Edit Profile\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TextField,{label:\"Email\",name:\"email\",fullWidth:true,margin:\"normal\",value:profileData.email,onChange:handleChange}),/*#__PURE__*/_jsx(TextField,{label:\"Phone\",name:\"phone\",fullWidth:true,margin:\"normal\",value:profileData.phone,onChange:handleChange}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",sx:{mt:2},onClick:handleSave,children:\"Save\"}),/*#__PURE__*/_jsx(Button,{variant:\"text\",sx:{mt:2,ml:2},onClick:()=>setEditMode(false),children:\"Cancel\"})]})]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Your Bookings\"}),userBookings.length===0?/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"No bookings yet.\"}):/*#__PURE__*/_jsx(List,{children:userBookings.map(booking=>{const task=tasks.find(t=>t.task_id===booking.taskId);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ListItem,{alignItems:\"flex-start\",children:/*#__PURE__*/_jsx(ListItemText,{primary:`Task ID: ${task.task_id} - ${task.department}`,secondary:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.primary\",children:[\"Hospital: \",task.hospital_name]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.primary\",children:[\"Date: \",task.date]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.primary\",children:[\"Shift: \",task.shift]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.primary\",children:[\"Qualification: \",task.qualification]}),booking.bookingDetails.comments&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Comments: \",booking.bookingDetails.comments]})]})})}),/*#__PURE__*/_jsx(Divider,{component:\"li\"})]},booking.bookingId);})})]})]});}export default StaffProfile;","map":{"version":3,"names":["React","useContext","useState","Typography","Box","List","ListItem","ListItemText","Divider","Paper","TextField","Button","AuthContext","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","StaffProfile","user","bookings","tasks","updateUserProfile","userBookings","filter","b","userId","username","editMode","setEditMode","profileData","setProfileData","email","phone","handleChange","e","target","name","value","handleSave","sx","maxWidth","mx","mt","children","elevation","p","variant","gutterBottom","onClick","label","fullWidth","margin","onChange","color","ml","length","map","booking","task","find","t","task_id","taskId","alignItems","primary","department","secondary","hospital_name","date","shift","qualification","bookingDetails","comments","component","bookingId"],"sources":["C:/Users/gagan/Documents/onduty-f-20240921T163350Z-001/onduty-f/src/components/Profile/StaffProfile.js"],"sourcesContent":["// src/components/Profile/StaffProfile.js\r\nimport React, { useContext, useState } from 'react';\r\nimport { Typography, Box, List, ListItem, ListItemText, Divider, Paper, TextField, Button } from '@mui/material';\r\nimport { AuthContext } from '../../contexts/AuthContext';\r\n\r\nfunction StaffProfile() {\r\n  const { user, bookings, tasks, updateUserProfile } = useContext(AuthContext);\r\n\r\n  const userBookings = bookings.filter(b => b.userId === user.username);\r\n\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [profileData, setProfileData] = useState({\r\n    email: user.email || '',\r\n    phone: user.phone || '',\r\n    // Add other profile fields as needed\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    setProfileData({ ...profileData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSave = () => {\r\n    // Use updateUserProfile instead of setUser directly\r\n    updateUserProfile(profileData);\r\n    setEditMode(false);\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ maxWidth: 800, mx: 'auto', mt: 5 }}>\r\n      <Paper elevation={3} sx={{ p: 4 }}>\r\n        <Typography variant=\"h4\" gutterBottom>\r\n          {user.username}'s Profile\r\n        </Typography>\r\n        <Typography variant=\"subtitle1\" gutterBottom>\r\n          Type: Medical Staff\r\n        </Typography>\r\n        {!editMode ? (\r\n          <>\r\n            <Typography variant=\"body1\">Email: {user.email || 'Not provided'}</Typography>\r\n            <Typography variant=\"body1\">Phone: {user.phone || 'Not provided'}</Typography>\r\n            <Button variant=\"outlined\" sx={{ mt: 2 }} onClick={() => setEditMode(true)}>\r\n              Edit Profile\r\n            </Button>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <TextField \r\n              label=\"Email\" \r\n              name=\"email\" \r\n              fullWidth \r\n              margin=\"normal\" \r\n              value={profileData.email}\r\n              onChange={handleChange}\r\n            />\r\n            <TextField \r\n              label=\"Phone\" \r\n              name=\"phone\" \r\n              fullWidth \r\n              margin=\"normal\" \r\n              value={profileData.phone}\r\n              onChange={handleChange}\r\n            />\r\n            {/* Add other profile fields as needed */}\r\n            <Button variant=\"contained\" color=\"primary\" sx={{ mt: 2 }} onClick={handleSave}>\r\n              Save\r\n            </Button>\r\n            <Button variant=\"text\" sx={{ mt: 2, ml: 2 }} onClick={() => setEditMode(false)}>\r\n              Cancel\r\n            </Button>\r\n          </>\r\n        )}\r\n      </Paper>\r\n\r\n      <Box sx={{ mt: 4 }}>\r\n        <Typography variant=\"h5\" gutterBottom>\r\n          Your Bookings\r\n        </Typography>\r\n        {userBookings.length === 0 ? (\r\n          <Typography variant=\"body1\">No bookings yet.</Typography>\r\n        ) : (\r\n          <List>\r\n            {userBookings.map((booking) => {\r\n              const task = tasks.find(t => t.task_id === booking.taskId);\r\n              return (\r\n                <React.Fragment key={booking.bookingId}>\r\n                  <ListItem alignItems=\"flex-start\">\r\n                    <ListItemText\r\n                      primary={`Task ID: ${task.task_id} - ${task.department}`}\r\n                      secondary={\r\n                        <>\r\n                          <Typography variant=\"body2\" color=\"text.primary\">\r\n                            Hospital: {task.hospital_name}\r\n                          </Typography>\r\n                          <Typography variant=\"body2\" color=\"text.primary\">\r\n                            Date: {task.date}\r\n                          </Typography>\r\n                          <Typography variant=\"body2\" color=\"text.primary\">\r\n                            Shift: {task.shift}\r\n                          </Typography>\r\n                          <Typography variant=\"body2\" color=\"text.primary\">\r\n                            Qualification: {task.qualification}\r\n                          </Typography>\r\n                          {booking.bookingDetails.comments && (\r\n                            <Typography variant=\"body2\" color=\"text.secondary\">\r\n                              Comments: {booking.bookingDetails.comments}\r\n                            </Typography>\r\n                          )}\r\n                        </>\r\n                      }\r\n                    />\r\n                  </ListItem>\r\n                  <Divider component=\"li\" />\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n          </List>\r\n        )}\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default StaffProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}