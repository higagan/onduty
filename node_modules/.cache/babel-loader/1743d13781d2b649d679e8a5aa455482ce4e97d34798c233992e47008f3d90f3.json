{"ast":null,"code":"// src/components/Task/BookingForm.js\nimport React,{useState,useContext}from'react';import{useParams,useNavigate}from'react-router-dom';import{TextField,Button,Typography,Box}from'@mui/material';import{AuthContext}from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BookingForm(){const{taskId}=useParams();const navigate=useNavigate();const{tasks,bookTask,user}=useContext(AuthContext);const task=tasks.find(t=>t.task_id===parseInt(taskId));const[formData,setFormData]=useState({name:user.type==='Doctor'?user.username:'',contact:'',comments:''});const[bookingSuccess,setBookingSuccess]=useState(false);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=e=>{e.preventDefault();const bookingDetails={...formData,taskId:task.task_id,userId:user.type==='Doctor'?user.username:user.hospitalId,dateBooked:new Date().toISOString()};bookTask(task.task_id,bookingDetails);setBookingSuccess(true);// In a real app, send bookingDetails to the backend\n};if(!task){return/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Task not found.\"});}if(bookingSuccess){return/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:500,mx:'auto',textAlign:'center',mt:5},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Booking Confirmed!\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",gutterBottom:true,children:[\"You have successfully booked the task at \",task.hospital_name,\".\"]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>navigate('/'),children:\"Go to Listings\"})]});}return/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:500,mx:'auto',mt:5},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",gutterBottom:true,children:[\"Book Task at \",task.hospital_name]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[user.type==='Doctor'&&/*#__PURE__*/_jsx(TextField,{label:\"Full Name\",name:\"name\",fullWidth:true,margin:\"normal\",value:formData.name,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Contact Number\",name:\"contact\",fullWidth:true,margin:\"normal\",value:formData.contact,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Comments\",name:\"comments\",fullWidth:true,margin:\"normal\",multiline:true,rows:4,value:formData.comments,onChange:handleChange}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,sx:{mt:2},children:\"Confirm Booking\"})]})]});}export default BookingForm;","map":{"version":3,"names":["React","useState","useContext","useParams","useNavigate","TextField","Button","Typography","Box","AuthContext","jsx","_jsx","jsxs","_jsxs","BookingForm","taskId","navigate","tasks","bookTask","user","task","find","t","task_id","parseInt","formData","setFormData","name","type","username","contact","comments","bookingSuccess","setBookingSuccess","handleChange","e","target","value","handleSubmit","preventDefault","bookingDetails","userId","hospitalId","dateBooked","Date","toISOString","variant","children","sx","maxWidth","mx","textAlign","mt","gutterBottom","hospital_name","color","onClick","onSubmit","label","fullWidth","margin","onChange","required","multiline","rows"],"sources":["C:/Users/gagan/Documents/onduty-f-20240921T163350Z-001/onduty-f/src/components/Task/BookingForm.js"],"sourcesContent":["// src/components/Task/BookingForm.js\r\nimport React, { useState, useContext } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { TextField, Button, Typography, Box } from '@mui/material';\r\nimport { AuthContext } from '../../contexts/AuthContext';\r\n\r\nfunction BookingForm() {\r\n  const { taskId } = useParams();\r\n  const navigate = useNavigate();\r\n  const { tasks, bookTask, user } = useContext(AuthContext);\r\n  \r\n  const task = tasks.find(t => t.task_id === parseInt(taskId));\r\n  \r\n  const [formData, setFormData] = useState({\r\n    name: user.type === 'Doctor' ? user.username : '',\r\n    contact: '',\r\n    comments: '',\r\n  });\r\n\r\n  const [bookingSuccess, setBookingSuccess] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({...formData, [e.target.name]: e.target.value});\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const bookingDetails = {\r\n      ...formData,\r\n      taskId: task.task_id,\r\n      userId: user.type === 'Doctor' ? user.username : user.hospitalId,\r\n      dateBooked: new Date().toISOString(),\r\n    };\r\n    bookTask(task.task_id, bookingDetails);\r\n    setBookingSuccess(true);\r\n    // In a real app, send bookingDetails to the backend\r\n  };\r\n\r\n  if (!task) {\r\n    return <Typography variant=\"h6\">Task not found.</Typography>;\r\n  }\r\n\r\n  if (bookingSuccess) {\r\n    return (\r\n      <Box sx={{ maxWidth: 500, mx: 'auto', textAlign: 'center', mt: 5 }}>\r\n        <Typography variant=\"h5\" gutterBottom>\r\n          Booking Confirmed!\r\n        </Typography>\r\n        <Typography variant=\"body1\" gutterBottom>\r\n          You have successfully booked the task at {task.hospital_name}.\r\n        </Typography>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={() => navigate('/')} >\r\n          Go to Listings\r\n        </Button>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ maxWidth: 500, mx: 'auto', mt: 5 }}>\r\n      <Typography variant=\"h5\" gutterBottom>\r\n        Book Task at {task.hospital_name}\r\n      </Typography>\r\n      <form onSubmit={handleSubmit}>\r\n        {user.type === 'Doctor' && (\r\n          <TextField \r\n            label=\"Full Name\" \r\n            name=\"name\" \r\n            fullWidth \r\n            margin=\"normal\" \r\n            value={formData.name}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        )}\r\n        <TextField \r\n          label=\"Contact Number\" \r\n          name=\"contact\" \r\n          fullWidth \r\n          margin=\"normal\" \r\n          value={formData.contact}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <TextField \r\n          label=\"Comments\" \r\n          name=\"comments\" \r\n          fullWidth \r\n          margin=\"normal\" \r\n          multiline\r\n          rows={4}\r\n          value={formData.comments}\r\n          onChange={handleChange}\r\n        />\r\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth sx={{ mt: 2 }}>\r\n          Confirm Booking\r\n        </Button>\r\n      </form>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default BookingForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}